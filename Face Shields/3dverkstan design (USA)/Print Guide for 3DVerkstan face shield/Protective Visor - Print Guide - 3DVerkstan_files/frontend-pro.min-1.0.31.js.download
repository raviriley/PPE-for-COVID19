!function(t){var a={};function e(i){if(a[i])return a[i].exports;var r=a[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}e.m=t,e.c=a,e.d=function(t,a,i){e.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)},e.p="",e(e.s=5)}([,,,,,function(t,a,e){t.exports=e(6)},function(t,a,e){jQuery(function(t){Promise.resolve().then(function(){return e(7)}).then(function(){t(document).on("wc_variation_form",".variations_form",function(){t(this).WooVariationSwatchesPro()})})})},function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=Object.assign||function(t){for(var a=1;a<arguments.length;a++){var e=arguments[a];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},r=function(){function t(t,a){for(var e=0;e<a.length;e++){var i=a[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(a,e,i){return e&&t(a.prototype,e),i&&t(a,i),a}}();var n=function(t){var a={},e=function(){function e(i,r){!function(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}(this,e),this._el=i,this._element=t(i),this._config=t.extend({},a,r),this._generated={},this.product_variations=this._element.data("product_variations"),this.is_ajax_variation=!this.product_variations,this.is_loop=this._element.hasClass("wvs-archive-variation-wrapper"),this._attributeFields=this._element.find(".variations select"),this._wrapper=this._element.closest(woo_variation_swatches_options.archive_product_wrapper),this._cart_button=this._wrapper.find(".wvs_add_to_cart_button"),this._cart_button_ajax=this._wrapper.find(".wvs_ajax_add_to_cart"),this._cart_button_html=this._cart_button.clone().html(),this._image=this._wrapper.find(woo_variation_swatches_options.archive_image_selector),this._price=this._wrapper.find(".price"),this._price_html=this._price.clone().html(),this._product_id=this._cart_button.data("product_id"),this._variation_shown=!1,t.trim(woo_variation_swatches_options.archive_add_to_cart_button_selector)&&(this._cart_button=this._wrapper.find(woo_variation_swatches_options.archive_add_to_cart_button_selector),this._cart_button_ajax=this._wrapper.find(woo_variation_swatches_options.archive_add_to_cart_button_selector)),this.init(this.is_ajax_variation),this.onVariationShownHide(),this.addToCartButton(this.is_ajax_variation),this.is_loop?(this.foundVariation(this.is_ajax_variation),woo_variation_swatches_options.enable_single_variation_preview_archive&&woo_variation_swatches_options.enable_single_variation_preview&&woo_variation_swatches_options.single_variation_preview_attribute&&(this._attributeFieldSingle=this._element.find(".variations select#"+woo_variation_swatches_options.single_variation_preview_attribute),this.changeImages())):(woo_variation_swatches_options.enable_single_variation_preview&&woo_variation_swatches_options.single_variation_preview_attribute&&(this._attributeFieldSingle=this._element.find(".variations select#"+woo_variation_swatches_options.single_variation_preview_attribute),this.changeImages()),woo_variation_swatches_options.enable_linkable_variation_url&&this.generateVariationURL()),t(document).trigger("woo_variation_swatches_pro",[this._element])}return r(e,[{key:"generateVariationURL",value:function(){var a=this,e=new URL(window.location.toString()),r=e.searchParams.toString(),n=e.origin+e.pathname;this._element.on("check_variations.wc-variation-form",function(o){var _=void 0;woo_variation_swatches_options.wc_bundles_enabled?(e=new URL(window.location.toString()),r=e.searchParams.toString(),_=a.getChosenAttributesBundleSupport()):_=a.getChosenAttributes();var s=Object.keys(_).reduce(function(t,a){return _[a]&&(t[a]=_[a]),t},{}),c=[].concat(function(t){if(Array.isArray(t)){for(var a=0,e=Array(t.length);a<t.length;a++)e[a]=t[a];return e}return Array.from(t)}(new URLSearchParams(r).keys())).reduce(function(t,a){return t[a]=new URLSearchParams(r).get(a),t},{}),h=i({},c,s),u=t.param(h);window.history.pushState({},"",a.addQueryArg(n,u))})}},{key:"setDefaultImages",value:function(){var a=this;_.delay(function(){a._element.data("product_variations");a._element.find("ul.variable-items-wrapper.wvs-catalog-variable-wrapper > li:not(.disabled):not(.woo-variation-swatches-variable-item-more)").each(function(a,e){t(this).off("wvs-selected-item.catalog-image-hover"),t(this).off("wvs-selected-item.catalog-image-click"),t(this).off("mouseenter.catalog-image-hover"),t(this).off("mouseleave.catalog-image-hover"),t(this).hasClass("selected")&&a,"hover"===woo_variation_swatches_options.catalog_mode_event&&t(this).on("mouseenter.catalog-image-hover",function(a){a.stopPropagation(),t(this).trigger("click").trigger("focusin"),t("body").hasClass("woo-variation-swatches-on-mobile")&&t(this).trigger("touchstart")})})},2)}},{key:"onVariationShownHide",value:function(){var t=this;this._element.on("show_variation",{variationForm:this._element},function(a){t._variation_shown=!0}),this._element.on("hide_variation",{variationForm:this._element},function(a){t._variation_shown=!1,t.setDefaultImages(),t.is_loop&&t.shopResetDisplayedVariation()})}},{key:"init",value:function(a){var e=this;_.delay(function(){e.setDefaultImages(),e._element.trigger("woo_variation_swatches_pro_init",[e,e.product_variations]),t(document).trigger("woo_variation_swatches_pro_loaded",[e._element,e.product_variations])},2)}},{key:"foundVariation",value:function(){var a=this;this._element.on("found_variation.wvs-variation-form",{variationForm:this._element},function(e,r){e.stopPropagation(),a.variationsImageUpdate(r);var n="",o=a._wrapper.find(".added_to_cart"),_=a._wrapper.find(".added_to_cart_button"),s=a._wrapper.find(".price");if(n=(n=(n=(r.variation_is_visible?wp.template("wvs-variation-template"):wp.template("unavailable-variation-template"))({variation:r,price_html:t(r.price_html).unwrap().html()||a._price_html})).replace("/*<![CDATA[*/","")).replace("/*]]>*/",""),s.html(n),a._cart_button.data("variation_id",r.variation_id),a._cart_button.data("variation",a.getChosenAttributes()),!woo_variation_swatches_options.enable_catalog_mode&&(woo_variation_swatches_options.archive_add_to_cart_text?a._cart_button.html(woo_variation_swatches_options.archive_add_to_cart_text):wc_add_to_cart_variation_params.i18n_add_to_cart.trim()&&a._cart_button.text(wc_add_to_cart_variation_params.i18n_add_to_cart),"no"===wc_add_to_cart_variation_params.enable_ajax_add_to_cart)){var c=t.param(i({},a.getChosenAttributes(),{"add-to-cart":a._product_id,variation_id:r.variation_id}));a._cart_button.prop("href",a.addQueryArg(a._cart_button.data("add_to_cart_url"),c))}a._cart_button.removeClass("added"),o.length>0&&o.remove(),_.length>0&&_.remove()}),this._element.on("reset_image.wvs-variation-form",{variationForm:this._element},function(t){a.variationsImageUpdate(!1)}),this._element.on("reset_data.wvs-variation-form",{variationForm:this._element},function(t){a.shopResetDisplayedVariation()})}},{key:"shopResetDisplayedVariation",value:function(){var t=this._wrapper.find(".price"),a=this._wrapper.find(".added_to_cart"),e=this._wrapper.find(".added_to_cart_button");t.html(this._price_html),this._cart_button.data("variation_id",""),this._cart_button.data("variation",""),woo_variation_swatches_options.enable_catalog_mode||(woo_variation_swatches_options.archive_add_to_cart_select_options?this._cart_button.html(woo_variation_swatches_options.archive_add_to_cart_select_options):wc_add_to_cart_variation_params.i18n_select_options.trim()&&this._cart_button.text(wc_add_to_cart_variation_params.i18n_select_options),"no"===wc_add_to_cart_variation_params.enable_ajax_add_to_cart&&this._cart_button.prop("href",this._cart_button.data("product_permalink"))),this._cart_button.removeClass("added"),a.length>0&&a.remove(),e.length>0&&e.remove()}},{key:"variationsImageUpdate",value:function(a){this._image.addClass("wvs-pro-image-load").one("webkitAnimationEnd oanimationend msAnimationEnd animationend webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){t(this).removeClass("wvs-pro-image-load")}),a&&a.image&&a.image.thumb_src&&a.image.thumb_src.length>1?(this._image.wc_set_variation_attr("src",a.image.thumb_src),this._image.wc_set_variation_attr("height",a.image.thumb_src_h),this._image.wc_set_variation_attr("width",a.image.thumb_src_w),this._image.wc_set_variation_attr("srcset",a.image.thumb_srcset),this._image.wc_set_variation_attr("sizes",a.image.thumb_sizes),this._image.wc_set_variation_attr("title",a.image.title),this._image.wc_set_variation_attr("alt",a.image.alt)):(this._image.wc_reset_variation_attr("src"),this._image.wc_reset_variation_attr("width"),this._image.wc_reset_variation_attr("height"),this._image.wc_reset_variation_attr("srcset"),this._image.wc_reset_variation_attr("sizes"),this._image.wc_reset_variation_attr("title"),this._image.wc_reset_variation_attr("alt"))}},{key:"addToCartButton",value:function(){this._cart_button_ajax.off("click.wvs-pro-archive-add-to-cart"),this._cart_button_ajax.on("click.wvs-pro-archive-add-to-cart",function(a){var e=t(this);if(woo_variation_swatches_options.enable_catalog_mode)return!0;if(!e.data("variation_id"))return!0;a.preventDefault(),a.stopPropagation(),e.removeClass("added"),e.addClass("loading");var i={action:"wvs_add_variation_to_cart"};t.each(e.data(),function(t,a){i[t]=a}),t(document.body).trigger("adding_to_cart",[e,i]),t.post(wc_add_to_cart_variation_params.ajax_url.toString(),i,function(a){a&&(a.error&&a.product_url?window.location=a.product_url:"yes"!==wc_add_to_cart_params.cart_redirect_after_add?t(document.body).trigger("added_to_cart",[a.fragments,a.cart_hash,e]):window.location=wc_add_to_cart_params.cart_url)})})}},{key:"getChosenAttributesBundleSupport",value:function(){var a={};return this._attributeFields.each(function(){var e=t(this).attr("name"),i=t(this).val()||"";i.length>0&&0,0,a[e]=i}),a}},{key:"getChosenAttributes",value:function(){var a={};return this._attributeFields.each(function(){var e=t(this).data("attribute_name")||t(this).attr("name"),i=t(this).val()||"";i.length>0&&0,0,a[e]=i}),a}},{key:"addQueryArg",value:function(t,a){if(a){a=(a=a.trim().replace(/^(\?|#|&)/,"").replace(/(\?|#|&)$/,""))?"?"+a:a;var e=t.split(/[\?\#]/)[0];a&&/\:\/\/[^\/]*$/.test(e)&&(e+="/");var i=t.match(/(\#.*)$/);t=e+a,i&&(t+=i[0])}return t}},{key:"onResetDisplayedVariation",value:function(t){this._element.closest(".product").find(".product_meta").find(".sku").wc_reset_content(),this._element.closest(".product").find(".product_weight").wc_reset_content(),this._element.closest(".product").find(".product_dimensions").wc_reset_content(),this._element.trigger("reset_image"),this._element.find(".single_variation").slideUp(200).trigger("hide_variation")}},{key:"changeImages",value:function(){var t=this,a=this._element.data("events"),e=jQuery.extend(!0,{},a.reset_data);this._element.on("check_variations.wc-variation-form",function(a){var i=t._element.data("product_variations"),r=t.getChosenAttributesAll(),n=(r.data,t.getChosenAttributesSingle()),o=n.data;if(n.count>0)if(r.count!==r.chosenCount&&n.count===n.chosenCount)t._element.off("reset_data");else for(var s in t._element.off("reset_data"),e)if(e.hasOwnProperty(s)){var c=e[s],h=c.namespace?"."+c.namespace:"",u=c.data?c.data:{},d=c.handler?c.handler:function(){};t._element.on("reset_data"+h,u,d)}if(n.count>0&&r.count!==r.chosenCount&&n.count===n.chosenCount){t._element.trigger("update_variation_values");var l=t.findMatchingVariations(i,o).shift();l?_.delay(function(){t._element.trigger("found_variation",[l]),t._element.trigger("hide_variation"),t._element.trigger("wvs_pro_single_preview_found_variation",[t,l])},50):(n.chosenCount=0,t._element.trigger("update_variation_values"),t._element.trigger("reset_data"))}})}},{key:"getChosenAttributesAll",value:function(){var a={},e=0,i=0;return this._attributeFields.each(function(){var r=t(this).data("attribute_name")||t(this).attr("name"),n=t(this).val()||"";n.length>0&&i++,e++,a[r]=n}),{count:e,chosenCount:i,data:a}}},{key:"getChosenAttributesSingle",value:function(){var a={},e=0,i=0;return this._attributeFieldSingle.each(function(){var r=t(this).data("attribute_name")||t(this).attr("name"),n=t(this).val()||"";n.length>0&&i++,e++,a[r]=n}),{count:e,chosenCount:i,data:a}}},{key:"findMatchingVariations",value:function(t,a){for(var e=[],i=0;i<t.length;i++){var r=t[i];this.isMatch(r.attributes,a)&&e.push(r)}return e}},{key:"isMatch",value:function(t,a){var e=!0;for(var i in t)if(t.hasOwnProperty(i)){var r=t[i],n=a[i];void 0!==r&&void 0!==n&&0!==r.length&&0!==n.length&&r!==n&&(e=!1)}return e}}],[{key:"_jQueryInterface",value:function(t){return this.each(function(){new e(this,t)})}}]),e}();return t.fn.WooVariationSwatchesPro=e._jQueryInterface,t.fn.WooVariationSwatchesPro.Constructor=e,t.fn.WooVariationSwatchesPro.noConflict=function(){return t.fn.WooVariationSwatchesPro=t.fn.WooVariationSwatchesPro,e._jQueryInterface},e}(jQuery);a.default=n}]);