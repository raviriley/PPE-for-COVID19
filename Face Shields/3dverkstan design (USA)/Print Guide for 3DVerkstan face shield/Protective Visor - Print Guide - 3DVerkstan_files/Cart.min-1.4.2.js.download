jQuery(function(r){if("undefined"==typeof wc_cart_fragments_params)return!1;var t=!0,o=wc_cart_fragments_params.cart_hash_key;try{t="sessionStorage"in window&&null!==window.sessionStorage,window.sessionStorage.setItem("wc","test"),window.sessionStorage.removeItem("wc"),window.localStorage.setItem("wc","test"),window.localStorage.removeItem("wc")}catch(e){t=!1}function n(){t&&sessionStorage.setItem("wc_cart_created",(new Date).getTime())}function s(e){t&&(localStorage.setItem(o,e),sessionStorage.setItem(o,e))}var e,a={url:wc_cart_fragments_params.wc_ajax_url.toString().replace("%%endpoint%%","get_refreshed_fragments"),type:"POST",data:{time:(new Date).getTime()},timeout:wc_cart_fragments_params.request_timeout,success:function(e){e&&e.fragments&&(r.each(e.fragments,function(e,t){r(e).replaceWith(t)}),t&&(sessionStorage.setItem(wc_cart_fragments_params.fragment_name,JSON.stringify(e.fragments)),s(e.cart_hash),e.cart_hash&&n()),r(document.body).trigger("wc_fragments_refreshed"))},error:function(){r(document.body).trigger("wc_fragments_ajax_error")}};function i(){r.ajax(a)}if(t){var c=null;r(document.body).on("wc_fragment_refresh updated_wc_div",function(){i()}),r(document.body).on("added_to_cart removed_from_cart",function(e,t,r){var a=sessionStorage.getItem(o);null!=a&&""!==a||n(),sessionStorage.setItem(wc_cart_fragments_params.fragment_name,JSON.stringify(t)),s(r)}),r(document.body).on("wc_fragments_refreshed",function(){clearTimeout(c),c=setTimeout(i,864e5)}),r(window).on("storage onstorage",function(e){o===e.originalEvent.key&&localStorage.getItem(o)!==sessionStorage.getItem(o)&&i()}),r(window).on("pageshow",function(e){e.originalEvent.persisted&&(r(".widget_shopping_cart_content").empty(),r(document.body).trigger("wc_fragment_refresh"))});try{var g=r.parseJSON(sessionStorage.getItem(wc_cart_fragments_params.fragment_name)),_=sessionStorage.getItem(o),m=Cookies.get("woocommerce_cart_hash"),d=sessionStorage.getItem("wc_cart_created");if(null!=_&&""!==_||(_=""),null!=m&&""!==m||(m=""),_&&(null==d||""===d))throw"No cart_created";if(d){var w=1*d+864e5,f=(new Date).getTime();if(w<f)throw"Fragment expired";c=setTimeout(i,w-f)}if(!g||!g["div.widget_shopping_cart_content"]||_!==m)throw"No fragment";r.each(g,function(e,t){r(e).replaceWith(t)}),r(document.body).trigger("wc_fragments_loaded");var u=sessionStorage.getItem("pll_language"),l=(null!=(e=r.cookie("pll_language"))&&""!==e||(e=""),e);if(null!=u&&""!==u||(u=""),!l)throw"Language not found";if(!u||u!==l)throw sessionStorage.setItem("pll_language",l),"Language changed"}catch(e){i()}}else i();0<Cookies.get("woocommerce_items_in_cart")?r(".hide_cart_widget_if_empty").closest(".widget_shopping_cart").show():r(".hide_cart_widget_if_empty").closest(".widget_shopping_cart").hide(),r(document.body).on("adding_to_cart",function(){r(".hide_cart_widget_if_empty").closest(".widget_shopping_cart").show()}),"undefined"!=typeof wp&&wp.customize&&wp.customize.selectiveRefresh&&wp.customize.widgetsPreview&&wp.customize.widgetsPreview.WidgetPartial&&wp.customize.selectiveRefresh.bind("partial-content-rendered",function(){i()})});